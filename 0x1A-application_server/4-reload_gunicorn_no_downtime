#!/bin/bash

# Path to the Gunicorn PID file
PID_FILE="/path/to/gunicorn.pid"

# Check if the PID file exists
if [ -f "$PID_FILE" ]; then
    # Get the old PID from the PID file
    oldpid=$(cat "$PID_FILE")
    
    # Gracefully reload Gunicorn by sending HUP signal to the old process
    kill -HUP "$oldpid"
    sleep 1
    
    # Check if the Gunicorn process has been successfully restarted
    if ps -p "$oldpid" > /dev/null; then
        echo "Gunicorn reload failed. Please check the logs for more information."
    else
        echo "Gunicorn reload successful."
    fi
else
    echo "Gunicorn PID file not found. Please ensure Gunicorn is running and the PID file path is correct."
fi
