#!/usr/bin/env bash
# Gracefully reloads Gunicorn to update application code or configuration.

# Find the process IDs of Gunicorn workers
worker_pids=$(pgrep gunicorn)

# Gracefully shutdown each worker
for pid in $worker_pids; do
    echo "Gracefully shutting down Gunicorn worker $pid..."
    kill -HUP "$pid"
    sleep 2  # Optional: Wait for 2 seconds to allow worker to finish processing current requests
done
